<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up</title>
</head>

<style>
  body {
    font-family: Arial, Helvetica, sans-serif;
  }

  * {
    box-sizing: border-box
  }

  /* Full-width input fields */
  input[type=text],
  input[type=password] {
    width: 100%;
    padding: 15px;
    margin: 5px 0 22px 0;
    display: inline-block;
    border: none;
    background: #f1f1f1;
  }

  input[type=text]:focus,
  input[type=password]:focus {
    background-color: #ddd;
    outline: none;
  }

  hr {
    border: 1px solid #f1f1f1;
    margin-bottom: 25px;
  }

  /* Set a style for all buttons */
  button {
    background-color: #04AA6D;
    color: white;
    padding: 14px 20px;
    margin: 8px 0;
    border: none;
    cursor: pointer;
    width: 100%;
    opacity: 0.9;
  }

  button:hover {
    opacity: 1;
  }

  /* Extra styles for the cancel button */
  .cancelbtn {
    padding: 14px 20px;
    background-color: #f44336;
  }

  /* Float cancel and signup buttons and add an equal width */
  .cancelbtn,
  .signupbtn {
    float: left;
    width: 50%;
  }

  /* Add padding to container elements */
  .container {
    padding: 16px;
  }

  /* Clear floats */
  .clearfix::after {
    content: "";
    clear: both;
    display: table;
  }

  /* Change styles for cancel button and signup button on extra small screens */
  @media screen and (max-width: 300px) {

    .cancelbtn,
    .signupbtn {
      width: 100%;
    }
  }
</style>

<body>
  <div class="container">
    <h1>Sign Up</h1>
    <p>Please fill in this form to create an account.</p>
    <hr>

    <form action="#">
      <label for="username"><b>Username</b></label>
      <input id="usr" type="text" placeholder="Enter Username" name="username" required>

      <label for="email"><b>Email</b></label>
      <input id="eml" type="text" placeholder="Enter Email" name="email" required>

      <label for="psw"><b>Password</b></label>
      <input id="psw" type="password" placeholder="Enter Password" name="psw" required>

      <label>
        <input type="checkbox" checked="checked" name="remember" style="margin-bottom:15px"> Remember me
      </label>
    </form>
    <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>

    <div class="clearfix">
      <button onclick="cancel()" type="button" class="cancelbtn">Cancel</button>
      <button onclick="signup()" type="submit" class="signupbtn">Sign Up</button>
    </div>
  </div>

</body>

<script src="/js/script.js"></script>

<script>
  // cancel for sign-up
  function cancel() {
    window.location.href = '/'
  }
</script>

<script>
  // Store data to cookies
  function signup() {
    console.log('create data')
    fetch(
      '/sign-up-api',
      {
        method: 'post',
        headers: { "Content-type": "application/json" },
        body: JSON.stringify({
          username: document.getElementById("usr").value,
          email: document.getElementById("eml").value,
          psw: document.getElementById("psw").value
        })
      }
    )
      .then(response => response.json())
      .then(result => {
        console.log(result)
        setCookie('qwerty', JSON.stringify(result.resultData), 1)
        let qwerty = getCookie('qwerty')
        console.log(qwerty)
        if (dataUser == null) {
          console.log('user data tidak ditemukan')
        } else {
          window.location.href = '/'
        }
      }).catch(function (error) {
        console.log(error)
      })
  }
</script>

</html>